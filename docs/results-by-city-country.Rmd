---
title: "HIA results by urban area and country"
author: "Michael D Garber"
date: "`r Sys.Date()`"
output:
  bookdown::html_document2:
    toc: true
    toc_float: true
    toc_depth: 4
---
Revised Jan 19, 2024 to limit to non-accidental

# By urban area
Ranked in descending order by age-standardized prevented mortality rate
```{r, eval=T, echo=F,warning=FALSE, message=F}
library(here)
library(tidyverse)
setwd(here("data-processed"))
load("hia_summary_gub.RData")

#people suggest DT for interactive tables
#https://stackoverflow.com/questions/27120002/is-it-possible-to-have-sortable-interactive-table-in-rmarkdown
#names(hia_summary_gub)
hia_summary_gub %>% 
  dplyr::select(
    city_name_admin_code_country_name,
                starts_with("n_d_na_prev_std_who_per_100k_pop")
  ) %>% 
  arrange(desc(n_d_na_prev_std_who_per_100k_pop_pt)) %>% 
  #Note column names can be changed
#  https://rstudio.github.io/DT/
  DT::datatable(
    colnames = c(
      "Urban area name", 
      "Age-standardized non-accidental deaths prevented per 100k adults 30+",
      "Lower 95% uncertainty limit",
      "Upper 95% uncertainty limit")
    ) 
```

# By country
Ranked in descending order by age-standardized prevented mortality rate
```{r, eval=T, echo=F,warning=FALSE, message=F}
setwd(here("data-processed"))
load("hia_summary_country.RData")

#people suggest DT for interactive tables
#https://stackoverflow.com/questions/27120002/is-it-possible-to-have-sortable-interactive-table-in-rmarkdown
#names(hia_summary_gub)
hia_summary_country %>% 
  dplyr::select(country_name_en,
                starts_with("n_d_na_prev_std_who_per_100k_pop")
  ) %>% 
  arrange(desc(n_d_na_prev_std_who_per_100k_pop_pt)) %>% 
  #Note you can change row names
#  https://rstudio.github.io/DT/
  DT::datatable(
    colnames = c(
      "Urban area name", 
      "Age-standardized deaths prevented per 100k adults 20+",
      "Lower 95% uncertainty limit",
      "Upper 95% uncertainty limit")
    ) 
```